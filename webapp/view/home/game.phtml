<?php
use ArmoredCore\WebObjects\Asset;
use ArmoredCore\WebObjects\Layout;
use ArmoredCore\WebObjects\URL;


	//session_start();
	
?><br></br>
<?php
	
	$CardsArray = array("cardClubs2", "cardClubs3", "cardClubs4", "cardClubs5", "cardClubs6", "cardClubs7", "cardClubs8", "cardClubs9", "cardClubs10", "cardClubsA", "cardClubsJ", "cardClubsK", "cardClubsQ", "cardDiamonds2", "cardDiamonds3", "cardDiamonds4", "cardDiamonds5", "cardDiamonds6", "cardDiamonds7", "cardDiamonds8", "cardDiamonds9", "cardDiamonds10", "cardDiamondsA", "cardDiamondsJ", "cardDiamondsK", "cardDiamondsQ", "cardHearts2", "cardHearts3", "cardHearts4", "cardHearts5", "cardHearts6", "cardHearts7", "cardHearts8", "cardHearts9.", "cardHearts10", "cardHeartsA", "cardHeartsJ", "cardHeartsK", "cardHeartsQ", "cardSpades2", "cardSpades3", "cardSpades4", "cardSpades5", "cardSpades6", "cardSpades7", "cardSpades8", "cardSpades9", "cardSpades10", "cardSpadesA", "cardSpadesJ", "cardSpadesK", "cardSpadesQ");
	$action = 'new';


	if(isset($_GET['action'])) $action = $_GET['action'];
	
	if($action == 'new') {
		$_SESSION['game'] = new Blackjack();
		$_SESSION['game']->addCard('Player');
		$_SESSION['game']->addCard('Dealer');
	} 
	
	if($action == 'hit') {
		if($_SESSION['game']->Scores['Player'] < 21) {
			$_SESSION['game']->addCard('Player', 1);	
			if($_SESSION['game']->Scores['Player'] > 21) $_SESSION['game']->playDealer();
		}
	}
	
	if($action == 'stand') {
		$_SESSION['game']->playDealer();
	}
	echo "Player Cards:<br>";
	foreach($_SESSION['game']->Cards['Player'] as $card) ?>
		<img src='<?=Asset::image("{$card['Suit']}{$card['Face']}.png")?>'>
	<?php
	echo "<br>Player Score: ".$_SESSION['game']->Scores['Player'];
	
	echo "<br><br>Dealer Cards:<br>";
	foreach($_SESSION['game']->Cards['Dealer'] as $card)?>
		<img src='<?=Asset::image("cardClubs2.png")?>'>
	<?php
	echo "<br>Dealer Score: ".$_SESSION['game']->Scores['Dealer'];
	
	// Options
	if($_SESSION['game']->Scores['Player'] < 21) echo "<br><a href='?action=hit'>[Hit]</a>";
	echo "<br><a href='?action=stand'>[Stand]</a><br><a href='?action=new'>[New]</a>";
	
	if($_SESSION['game']->GameEnd == 1)
	echo "<br>Game Result: ".$_SESSION['game']->getResult();

?>